## [2-3] CPU

μ»΄ν“¨ν„°μ—μ„ κ°€μ¥ μ¤‘μ”ν• λ¶€ν’ μ¤‘ ν•λ‚λ¥Ό κΌ½μΌλΌκ³  ν•λ‹¤λ©΄ λ‹¨μ—° CPUλ¥Ό κΌ½λ” μ‚¬λλ“¤μ΄ λ§μ„ κ²ƒμ΄λ‹¤.
κ·Έλ§νΌ CPUλ” μ¤‘μ”ν• λ¶€ν’μ΄μ§€λ§, μ¤‘μ”ν•λ‹¤κ³  ν•΄μ„ CPUμ λ‚΄λ¶€ νλ΅λ‚ μ‘λ™ λ°©μ‹ ν•λ‚ ν•λ‚λ¥Ό λ¨λ‘ μ•μ•„μ•Ό ν•λ” κ²ƒμ€ μ•„λ‹λ‹¤.
μ΄λ² μ μ—μ„λ” κ°λ°μκ°€ μ•μ•„μ•Ό ν•  λ°°κ²½μ§€μ‹μ— μ΄μ μ„ λ§μ¶° CPUμ— λ€ν•΄ μ•μ•„λ³΄μ.
<br/>
<br/>
### π“ λ μ§€μ¤ν„°
λ μ§€μ¤ν„°λ” CPU μ•μ— μλ” μ‘μ€ μ„μ‹ μ €μ¥μ¥μΉμ΄λ‹¤. CPU μ•μ—λ” λ‹¤μ–‘ν• λ μ§€μ¤ν„°λ“¤μ΄ μκ³ , κ°κΈ° λ‹¤λ¥Έ **μ΄λ¦„κ³Ό μ—­ν• **μ΄ μλ‹¤.
ν”„λ΅κ·Έλ¨μ„ μ΄λ£¨λ” λ°μ΄ν„°μ™€ λ…λ Ήμ–΄κ°€ ν”„λ΅κ·Έλ¨μ μ‹¤ν–‰ μ „ν›„λ΅ λ μ§€μ¤ν„°μ— μ €μ¥λκΈ° λ•λ¬Έμ— λ μ§€μ¤ν„°μ— μ €μ¥λ κ°’λ§ μ κ΄€μ°°ν•΄λ„ λΉ„κµμ  λ‚®μ€ μμ¤€μ ν”„λ΅κ·Έλ¨μ΄ μ–΄λ–»κ² μ‘λ™ν•λ”μ§€λ¥Ό νμ•…ν•  μ μλ‹¤.

λ μ§€μ¤ν„°λ” λ‹¤μκ³Ό κ°™μ€ WinDbg(μλ„μ° μ΄μμ²΄μ ), gdb(λ¦¬λ…μ¤, λ§¥OS μ΄μμ²΄μ ) λ“±μ λ””λ²„κΉ… λ„κµ¬λ¥Ό μ΄μ©ν•΄ κ΄€μ°°ν•  μ μλ‹¤.

<img src="https://github.com/user-attachments/assets/a6e6451b-718e-433d-865f-29189f907480" width="600"/><br/>

CPUλ¥Ό κµ¬μ„±ν•λ” λ μ§€μ¤ν„°λ“¤μ μ„Έμ„Έν• μΆ…λ¥μ™€ μ΄λ¦„μ€ μ΅°κΈμ”© λ‹¤λ¥΄μ§€λ§, μ•μΌλ΅ μ„¤λ…ν•  λ μ§€μ¤ν„°λ“¤μ€ **λ€λ¶€λ¶„μ CPUκ°€ κ³µν†µμ μΌλ΅ ν¬ν•¨ν•κ³  μλ” λ€ν‘μ μΈ λ μ§€μ¤ν„°**μ΄λ‹¤.
λ¨λ‘ μ €λ§λ‹¤μ μ—­ν• μ΄ μμ–΄ κ°μμ μ—­ν• μ— κ±Έλ§μ€ λ‚΄μ©λ“¤μ„ μ €μ¥ν•λ‹¤. κ·ΈλΌ **κ°κ°μ λ μ§€μ¤ν„°κ°€ CPU λ‚΄λ¶€μ—μ„ μ–΄λ–¤ μ—­ν• μ„ μν–‰ν•λ”μ§€**μ— μ μν•λ©° μ‚΄ν΄λ³΄μ.

#### [1] ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°
**ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°(PC, Program Counter)** λ” **λ©”λ¨λ¦¬μ—μ„ λ‹¤μμΌλ΅ μ½μ–΄ λ“¤μΌ λ…λ Ήμ–΄μ μ£Όμ†**λ¥Ό μ €μ¥ν•λ‹¤.
ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°λ¥Ό **λ…λ Ήμ–΄ ν¬μΈν„°(IP, Instruction Pointer)** λΌκ³  λ¶€λ¥΄λ” CPUλ„ μλ‹¤.
μΌλ°μ μΌλ΅ ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°λ” 1μ”© μ¦κ°€ν•λ”λ°, μ΄λ” κ³§ λ‹¤μμΌλ΅ μ½μ–΄ λ“¤μΌ λ©”λ¨λ¦¬ μ£Όμ†κ°€ 1μ”© μ¦κ°€ν•λ” κ²ƒκ³Ό κ°™λ‹¤.
λ©”λ¨λ¦¬μ— μ €μ¥λ ν”„λ΅κ·Έλ¨μ΄ μμ°¨μ μΌλ΅ μ‹¤ν–‰λ  μ μλ” κ²ƒμ€ κ·Όλ³Έμ μΌλ΅ ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„° κ°’μ΄ 1μ”© μ¦κ°€ν•λ©° μ‹¤ν–‰λκΈ° λ•λ¬Έμ΄λ‹¤.

<img src="https://github.com/user-attachments/assets/b9cf39ed-2214-4940-a61c-e2fefd80ab07" width="550"/><br/>

λ‹¤λ§, ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°κ°€ μ–Έμ λ‚ μ¦κ°€λ§ ν•λ” κ²ƒμ€ μ•„λ‹λ‹¤. ν”„λ΅κ·Έλλ° μ–Έμ–΄μ μ΅°κ±΄λ¬Έμ΄λ‚ λ¦¬ν„΄λ¬Έμ„ μƒκ°ν•΄λ³΄μ. μ΅°κ±΄μ΄ μ°Έμ΄ λκ±°λ‚ λ¦¬ν„΄λ¬Έμ„ μ‹¤ν–‰ν•λ” κ²½μ° ν”„λ΅κ·Έλ¨μ΄ μμ°¨μ μΌλ΅ μ‹¤ν–‰λμ§€ μ•λ”λ‹¤.
μ΄λ ‡κ² ν”„λ΅κ·Έλ¨μ μ‹¤ν–‰ νλ¦„μ΄ μμ°¨μ μ΄μ§€ μ•μ„ λ•λ” ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„° κ°’μ΄ μ„μμ μ„μΉλ΅ λ³€κ²½λλ‹¤.

<img src="https://github.com/user-attachments/assets/8515cf15-2b76-4aee-a57b-86807bdf733e" width="580"/><br/>

#### [2] λ…λ Ήμ–΄ λ μ§€μ¤ν„°
**λ…λ Ήμ–΄ λ μ§€μ¤ν„°(IR, Instruction Register)** λ” **ν•΄μ„ν•  λ…λ Ήμ–΄**, μ¦‰ λ©”λ¨λ¦¬μ—μ„ λ°©κΈ μ½μ–΄ λ“¤μΈ λ…λ Ήμ–΄λ¥Ό μ €μ¥ν•λ” λ μ§€μ¤ν„°μ΄λ‹¤.
CPU λ‚΄μ μ μ–΄μ¥μΉλ” λ…λ Ήμ–΄ λ μ§€μ¤ν„° μ† λ…λ Ήμ–΄λ¥Ό ν•΄μ„ν• λ’¤ ALU(μ‚°μ λ…Όλ¦¬μ—°μ‚°μ¥μΉ)λ΅ ν•μ—¬κΈ μ—°μ‚°ν•λ„λ΅ μ‹ν‚¤κ±°λ‚ λ‹¤λ¥Έ λ¶€ν’μΌλ΅ μ μ–΄ μ‹ νΈλ¥Ό λ³΄λ‚΄ ν•΄λ‹Ή λ¶€ν’μ„ μ‘λ™μ‹ν‚¨λ‹¤.

#### [3] λ²”μ© λ μ§€μ¤ν„°
**λ²”μ© λ μ§€μ¤ν„°(general purpose register)** λ” μ΄λ¦„ κ·Έλ€λ΅ λ‹¤μ–‘ν•κ³  μΌλ°μ μΈ μƒν™©μ—μ„ μμ λ΅­κ² μ‚¬μ©ν•  μ μλ” λ μ§€μ¤ν„°μ΄λ‹¤. λ°μ΄ν„°μ™€ λ…λ Ήμ–΄, μ£Όμ† λ¨λ‘λ¥Ό μ €μ¥ν•  μ μλ‹¤.
μΌλ°μ μΌλ΅ CPU μ•μ—λ” μ—¬λ¬ κ°μ λ²”μ© λ μ§€μ¤ν„°λ“¤μ΄ μλ‹¤.

#### [4] ν”λκ·Έ λ μ§€μ¤ν„°
**ν”λκ·Έ λ μ§€μ¤ν„°(flag register)** λ” μ—°μ‚°μ κ²°κ³Ό νΉμ€ CPU μƒνƒμ— λ€ν• λ¶€κ°€ μ •λ³΄μΈ **ν”λκ·Έ(flag)** κ°’μ„ μ €μ¥ν•λ” λ μ§€μ¤ν„°μ΄λ‹¤.
ν”λκ·Έλ” CPUκ°€ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬ν•λ” κ³Όμ •μ—μ„ λ°λ“μ‹ μ°Έμ΅°ν•΄μ•Ό ν•  μƒνƒ μ •λ³΄λ¥Ό μλ―Έν•λ” λΉ„νΈμ΄λ‹¤. λ€ν‘μ μΈ ν”λκ·Έμ μΆ…λ¥λ” λ‹¤μκ³Ό κ°™λ‹¤. ν”λκ·Έ λ μ§€μ¤ν„°λ” λ‹¤μκ³Ό κ°™μ€ ν”λκ·Έ(λΉ„νΈ)λ“¤λ΅ κµ¬μ„±λμ–΄ μλ” μ…μ΄λ‹¤.

<img src="https://github.com/user-attachments/assets/1a99f778-ab44-4dd5-9500-51ce5ebabd33" width="650"/><br/>

μλ¥Ό λ“¤μ–΄ λ‹¤μκ³Ό κ°™μ€ ν”λκ·Έ λ μ§€μ¤ν„°μ—μ„ CPUκ°€ μ—°μ‚°μ„ μν–‰ν• μ§ν›„μ— λ¶€νΈ ν”λκ·Έκ°€ 1μ΄ λμ—λ‹¤λ©΄ μ΄λ” μ—°μ‚°μ κ²°κ³Όκ°€ μμμ„μ„ λ‚νƒ€λ‚Έλ‹¤.

<img src="https://github.com/user-attachments/assets/27f46938-ba8c-4a36-a948-17d9e1591d02" width="400"/><br/>

#### [5] μ¤νƒ ν¬μΈν„°
λ©”λ¨λ¦¬μ—λ” μ‹¤ν–‰ μ¤‘μΈ ν”„λ΅κ·Έλ¨λ“¤μ΄ μ μ¬λμ–΄ μμΌλ©°, μ‹¤ν–‰ μ¤‘μΈ κ° ν”„λ΅κ·Έλ¨λ“¤μ€ μ¤νƒκ³Ό κ°™μ€ ν•νƒλ΅ μ‚¬μ© κ°€λ¥ν• μ£Όμ† κ³µκ°„μ„ ν•λ‚ μ΄μƒ κ°€μ§€κ³  μλ‹¤.
μ•”λ¬µμ μΌλ΅ μ¤νƒμ²λΌ μ‚¬μ©ν•μκ³  μ•½μ†λ μ΄ λ©”λ¨λ¦¬ μμ—­μ„ μ¤νƒ μμ—­μ΄λΌκ³  ν•λ‹¤. **μ¤νƒ ν¬μΈν„°(stack pointer)** λ€ λ©”λ¨λ¦¬ λ‚΄ μ¤νƒ μμ—­μ μµμƒλ‹¨ μ¤νƒ λ°μ΄ν„° μ„μΉλ¥Ό κ°€λ¦¬ν‚¤λ” νΉλ³„ν• λ μ§€μ¤ν„°λ¥Ό λ§ν•λ‹¤.

μλ¥Ό λ“¤μ–΄, λ‹¤μ κ·Έλ¦Όμ CPUμ— μλ” μ¤νƒ ν¬μΈν„°λ” 'μ¤νƒ λ°μ΄ν„° 3'μ΄ μ €μ¥λ κ³µκ°„μ„ κ°€λ¦¬ν‚¤κ³  μλ‹¤.
λ§μ•½ μ΄ μ¤νƒμ—μ„ λ°μ΄ν„°λ¥Ό κΊΌλ‚Έλ‹¤λ©΄ κ°€μ¥ κΌ­λ€κΈ°μ— μλ” 'μ¤νƒ λ°μ΄ν„° 3'μ„ κΊΌλ‚΄κ³ , μ¤νƒ ν¬μΈν„°λ” 'μ¤νƒ λ°μ΄ν„° 2'κ°€ μ €μ¥λ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤κ² λλ‹¤.
μ¤νƒ ν¬μΈν„°λ” λ§μ§€λ§‰μΌλ΅ μ¤νƒμ— μ €μ¥λ λ°μ΄ν„°μ μ„μΉλ¥Ό κ°€λ¦¬ν‚¤λ” λ μ§€μ¤ν„°μ΄μ, μ¤νƒμ΄ μ±„μ›μ§„ μ •λ„λ¥Ό λ‚νƒ€λ‚΄λ” λ μ§€μ¤ν„°μΈ μ…μ΄λ‹¤.

<img src="https://github.com/user-attachments/assets/152b7723-31a9-45b2-9923-c3156c8ca053" width="450"/><br/>
<br/>

### π“ μΈν„°λ½νΈ
λ…λ Ήμ–΄ μ‚¬μ΄ν΄μ„ ν•™μµν•λ©΄μ„ CPUμ λ μ§€μ¤ν„°λ¥Ό μ•μ•„μ•Όλ§ μ΄ν•΄ν•  μ μλ” μΈν„°λ½νΈ μ‚¬μ΄ν΄μ— λ€ν•΄ μ–ΈκΈ‰ν–λ‹¤. μΈν„°λ½νΈλΌλ” μ©μ–΄λ” ν”„λ΅κ·Έλλ° μ–Έμ–΄λ΅ κ°λ°ν•΄ λ³Έ μ‚¬λμ΄λΌλ©΄ ν• λ²μ―¤ μ ‘ν•΄ λ³Έ μ μ΄ μμ„ κ²ƒμ΄λ‹¤.
μΈν„°λ½νΈλ” λ‹¤μ–‘ν• μƒν™©μ—μ„ λ°μƒν•  μ μλ”λ°, μ„μλ΅ λ°μƒμ‹ν‚¬ μλ„ μκ³ , μλ»λ ν”„λ΅κ·Έλ¨μΌλ΅ μΈν•΄ λ°μƒν•κΈ°λ„ ν•λ©°, ν¨μ¨μ μΈ μ…μ¶λ ¥μ„ μ„ν•΄ μ‚¬μ©λκΈ°λ„ ν•λ‹¤.
μΈν„°λ½νΈλ” μ»΄ν“¨ν„° κµ¬μ΅°λ” λ¬Όλ΅ , μ΄μμ²΄μ λ¥Ό μ΄ν•΄ν•λ” λ°μ—λ„ μ•„μ£Ό μ¤‘μ”ν• κ°λ…μ΄λ―€λ΅ μ§‘μ¤‘ν•΄μ„ νμ•…ν•΄ λ‘κΈ°λ¥Ό λ°”λ€λ‹¤.

<img src="https://github.com/user-attachments/assets/8838e0e8-08d4-4fe2-a18e-57ac131d9767" width="600"/><br/>

μΈν„°λ½νΈ(interrupt)λ” 'λ°©ν•΄ν•λ‹¤, μ¤‘λ‹¨μ‹ν‚¤λ‹¤'λΌλ” μλ―Έμ΄λ‹¤. CPUκ°€ μν–‰ μ¤‘μΈ μ‘μ—…μ€ λ°©ν•΄λ¥Ό λ°›μ•„ μ μ‹ μ¤‘λ‹¨λ  μ μλ”λ°, μ΄λ ‡κ² **CPUμ μ‘μ—…μ„ λ°©ν•΄ν•λ” μ‹ νΈ**λ¥Ό **μΈν„°λ½νΈ(interrupt)** λΌκ³  ν•λ‹¤.
μΈν„°λ½νΈμ μΆ…λ¥λ¥Ό μ‚΄ν΄λ³΄λ©΄ μΈν„°λ½νΈκ°€ λ°μƒν•λ” μƒν™©μ„ μ—Ώλ³Ό μ μλ‹¤.

μΈν„°λ½νΈλ” ν¬κ² **λ™κΈ° μΈν„°λ½νΈμ™€ λΉ„λ™κΈ° μΈν„°λ½νΈ**λ΅ λ‚λ‰λ‹¤. **λ™κΈ° μΈν„°λ½νΈ(synchronous interrupts)** λ” CPUμ— μν•΄ λ°μƒν•λ” μΈν„°λ½νΈμ΄λ‹¤.
κ°€λ Ή CPUκ°€ ν”„λ΅κ·Έλλ° μ¤λ¥μ™€ κ°™μ€ **μμ™Έμ μΈ μƒν™©**(μμƒμΉ λ»ν• μƒν™©)μ„ λ§μ£Όμ³¤μ„ λ• λ°μƒν•λ” μΈν„°λ½νΈλ‹¤. μ΄λ° μ μ—μ„ λ™κΈ° μΈν„°λ½νΈλ” **μμ™Έ(exception)** λΌκ³ λ„ λ¶€λ¥Έλ‹¤.

**λΉ„λ™κΈ° μΈν„°λ½νΈ(asynchronous interrupts)** λ” μ£Όλ΅ **μ…μ¶λ ¥μ¥μΉμ— μν•΄ λ°μƒ**ν•λ” μΈν„°λ½νΈμ΄λ‹¤.
μ΄λ” μ„ΈνƒκΈ°μ μ„Ένƒ μ™„λ£ μ•λ¦Ό, μ „μλ μΈμ§€μ μ΅°λ¦¬ μ™„λ£ μ•λ¦Όκ³Ό κ°™μ€ **μ•λ¦Ό**μ μ—­ν• μ„ ν•λ©°, λ‹¤μκ³Ό κ°™μ΄ ν™μ©λλ‹¤.
- CPUκ°€ ν”„λ¦°ν„°μ™€ κ°™μ€ μ…μ¶λ ¥μ¥μΉμ—κ² μ…μ¶λ ¥ μ‘μ—…μ„ λ¶€νƒν•κ³ , μ‘μ—…μ„ λλ‚Έ μ…μ¶λ ¥μ¥μΉκ°€ CPUμ—κ² **μ™„λ£ μ•λ¦Ό(μΈν„°λ½νΈ)** μ„ λ³΄λ‚Έλ‹¤.
- ν‚¤λ³΄λ“, λ°”μ°μ¤μ™€ κ°™μ€ μ…μ¶λ ¥μ¥μΉκ°€ μ–΄λ–¤ μ…λ ¥μ„ λ°›μ•„λ“¤μ€μ„ λ•, μ΄λ¥Ό μ²λ¦¬ν•κΈ° μ„ν•΄ CPUμ—κ² **μ…λ ¥ μ•λ¦Ό(μΈν„°λ½νΈ)** μ„ λ³΄λ‚Έλ‹¤.

μΌλ°μ μΌλ΅ λΉ„λ™κΈ° μΈν„°λ½νΈλ¥Ό μΈν„°λ½νΈλΌκ³  μ§€μΉ­ν•κΈ°λ„ ν•μ§€λ§, μ©μ–΄μ νΌλ™μ„ λ°©μ§€ν•κΈ° μ„ν•΄ **ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ**λΌλ” μ©μ–΄λ¥Ό μ‚¬μ©ν•λ‹¤.
<br/>
#### [ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ]
ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ” μ•λ¦Όκ³Ό κ°™μ€ μΈν„°λ½νΈλΌκ³  ν–λ‹¤. CPUλ” **ν¨μ¨μ μΌλ΅ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬ν•κΈ° μ„ν•΄** ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ¥Ό μ‚¬μ©ν•λ‹¤. λ…λ Ήμ–΄λ¥Ό ν¨μ¨μ μΌλ΅ μ²λ¦¬ν•λ” κ²ƒκ³Ό ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ” μ–΄λ–¤ μƒκ΄€μ΄ μμ„κΉ?

κ°€λ Ή CPUκ°€ ν”„λ¦°ν„°μ— ν”„λ¦°νΈλ¥Ό λ…λ Ήν–λ‹¤κ³  κ°€μ •ν•΄ λ³΄μ. μΌλ°μ μΌλ΅ μ…μ¶λ ¥μ¥μΉμ μ†λ„λ” CPUμ— λΉ„ν•΄ ν„μ €ν λλ¦¬λ‹¤. κ·Έλμ„ CPUλ” μ…μ¶λ ¥ μ‘μ—…μ κ²°κ³Όλ¥Ό λ°”λ΅ λ°›μ•„ λ³Ό μ μ—†λ‹¤.
λ§μ•½ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ¥Ό μ‚¬μ©ν•μ§€ μ•λ”λ‹¤λ©΄ CPUλ” ν”„λ¦°ν„°κ°€ μ–Έμ  ν”„λ¦°νΈλ¥Ό λλ‚Όμ§€ λ¨λ¥΄κΈ° λ•λ¬Έμ— μ£ΌκΈ°μ μΌλ΅ ν”„λ¦°ν„°μ μ™„λ£ μ—¬λ¶€λ¥Ό ν™•μΈν•΄μ•Ό ν•λ‹¤.
μ΄κ±°μ€ λ§μΉ μ•λ¦Όμ΄ μ—†λ” μ „μλ μΈμ§€ μ•μ—μ„ μ–Έμ  μ΅°λ¦¬κ°€ λλ‚ μ§€ λ¬΄μ‘μ • κΈ°λ‹¤λ¦¬λ” μƒν™©κ³Ό κ°™λ‹¤.

> μ‘μ—… μ™„λ£ μ—¬λ¶€λ¥Ό κ³„μ†ν•΄μ„ ν™•μΈν•λ” κ²ƒμ€ μΈν„°λ½νΈμ™€ λ€λΉ„λλ” 'ν΄λ§'μ΄λΌλ” κΈ°λ²•μ΄λ‹¤.
> μ…μ¶λ ¥ μ‘μ—…μ—μ„ **ν΄λ§(polling)** μ΄λ€ μ…μ¶λ ¥μ¥μΉμ μƒνƒκ°€ μ–΄λ–¤μ§€, μ²λ¦¬ν•  λ°μ΄ν„°κ°€ μλ”μ§€ **μ£ΌκΈ°μ μΌλ΅ ν™•μΈν•λ” κ²ƒμ„ λ§ν•λ‹¤.**

ν•μ§€λ§ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ¥Ό μ‚¬μ©ν•λ©΄ CPUλ” μ‘μ—…μ΄ λλ‚κΈ°λ¥Ό λ§λƒ¥ κΈ°λ‹¤λ¦΄ ν•„μ” μ—†μ΄ ν”„λ¦°νΈκ°€ μ§„ν–‰λλ” λ™μ• μ¨μ „ν λ‹¤λ¥Έ μ‘μ—…μ„ μ²λ¦¬ν•  μ μκ² λλ‹¤.
μ΄λ ‡λ“― ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ” μ…μ¶λ ¥ μ™„λ£ μ—¬λ¶€λ¥Ό ν™•μΈν•κΈ° μ„ν• CPU μ‚¬μ΄ν΄ λ‚­λΉ„λ¥Ό μµμ†ν™”ν•κ³ , CPUκ°€ λ‹¤λ¥Έ μΌμ„ μν–‰ν•  μ μλ” μ‹κ°„μ„ λ²μ–΄ μ¤μΌλ΅μ¨ ν¨μ¨μ μΌλ΅ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬ν•  μ μλ„λ΅ λ•λ”λ‹¤.
κ·ΈλΌ CPUκ°€ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ¥Ό μ–΄λ–»κ² μ²λ¦¬ν•λ”μ§€ κµ¬μ²΄μ μΌλ΅ μ•μ•„λ³΄μ.

μ—¬λ¬ μΆ…λ¥μ μΈν„°λ½νΈκ°€ μκΈ°λ” ν•μ§€λ§, CPUκ°€ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” λ°©μ‹μ€ μΈν„°λ½νΈμ μΆ…λ¥λ¥Ό λ§‰λ΅ ν•κ³  λ€λ™μ†μ΄ν•λ‹¤. μΌλ°μ μΌλ΅ **CPUκ°€ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” μμ„**λ” λ‹¤μκ³Ό κ°™λ‹¤.
κ°•μ΅°ν•μ—¬ ν‘κΈ°ν• μ©μ–΄κ°€ μ΄λ² μ μ—μ„ κΈ°μ–µν•΄μ•Ό ν•  ν‚¤μ›λ“μ΄λ‹¤.

- [1] μ…μ¶λ ¥ μ¥μΉλ” CPUμ—κ² **μΈν„°λ½νΈ μ”μ²­ μ‹ νΈ**λ¥Ό λ³΄λ‚Έλ‹¤.
- [2] CPUλ” μ‹¤ν–‰ μ‚¬μ΄ν΄μ΄ λλ‚κ³  λ…λ Ήμ–΄λ¥Ό μΈμ¶ν•κΈ° μ „μ— ν•­μƒ μΈν„°λ½νΈ μ—¬λ¶€λ¥Ό ν™•μΈν•λ‹¤.
- [3] CPUλ” μΈν„°λ½νΈ μ”μ²­μ„ ν™•μΈν•κ³ , **μΈν„°λ½νΈ ν”λκ·Έ**λ¥Ό ν†µν•΄ ν„μ¬ μΈν„°λ½νΈλ¥Ό λ°›μ•„λ“¤μΌ μ μλ”μ§€ μ—¬λ¶€λ¥Ό ν™•μΈν•λ‹¤.
- [4] μΈν„°λ½νΈλ¥Ό λ°›μ•„λ“¤μΌ μ μλ‹¤λ©΄ CPUκ°€ μ§€κΈκΉμ§€μ μ‘μ—…μ„ λ°±μ—…ν•λ‹¤.
- [5] CPUλ” **μΈν„°λ½νΈ λ²΅ν„°**λ¥Ό μ°Έμ΅°ν•μ—¬ **μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄**μ„ μ‹¤ν–‰ν•λ‹¤.
- [6] μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ μ‹¤ν–‰μ΄ λλ‚λ©΄ [4]μ—μ„ λ°±μ—…ν•΄ λ‘” μ‘μ—…μ„ λ³µκµ¬ν•μ—¬ μ‹¤ν–‰μ„ μ¬κ°ν•λ‹¤.

μΈν„°λ½νΈμ™€ κ΄€λ ¨ν•΄ μ•μ•„μ•Ό ν•  μ©μ–΄λ” μΈν„°λ½νΈ μ”μ²­ μ‹ νΈ, μΈν„°λ½νΈ ν”λκ·Έ, μΈν„°λ½νΈ λ²΅ν„°, μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ΄λ‹¤. κ·ΈλΌ ν•λ‚μ”© μ•μ•„λ³΄μ.
μΈν„°λ½νΈλ” CPUμ μ •μƒμ μΈ μ‹¤ν–‰ νλ¦„μ„ λλ” κ²ƒμ΄κΈ° λ•λ¬Έμ— μΈν„°λ½νΈν•κΈ° μ „μ— CPUμ—κ² μΈν„°λ½νΈμ κ°€λ¥ μ—¬λ¶€λ¥Ό ν™•μΈν•΄μ•Ό ν•λ‹¤. μ΄λ¥Ό μ„ν• μ‹ νΈλ¥Ό **μΈν„°λ½νΈ μ”μ²­(interrupt request) μ‹ νΈ**λΌκ³  ν•λ‹¤.

<img src="https://github.com/user-attachments/assets/359895c6-b025-4914-b33b-f37f081c7f2c" width="370"/><br/>

μ΄λ• CPUκ°€ μΈν„°λ½νΈ μ”μ²­μ„ μμ©ν•κΈ° μ„ν•΄μ„λ” ν”λκ·Έ λ μ§€μ¤ν„°μ **μΈν„°λ½νΈ ν”λκ·Έ(interrupt flag)** κ°€ ν™μ„±ν™”λμ–΄ μμ–΄μ•Ό ν•λ‹¤.
μΈν„°λ½νΈ ν”λκ·Έλ” ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ¥Ό λ°›μ•„λ“¤μΌμ§€, λ¬΄μ‹ν• μ§€λ¥Ό κ²°μ •ν•λ” ν”λκ·Έμ΄λ‹¤. λ§μ•½ μΈν„°λ½νΈ ν”λκ·Έκ°€ λ¶κ°€λ¥μΌλ΅ μ„¤μ •λμ–΄ μλ‹¤λ©΄ CPUλ” μΈν„°λ½νΈ μ”μ²­μ΄ μ¤λ”λΌλ„ ν•΄λ‹Ή μ”μ²­μ„ λ¬΄μ‹ν•λ‹¤.

λ‹¤λ§, λ¨λ“  ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ¥Ό μΈν„°λ½νΈ ν”λκ·Έλ΅ λ§‰μ„ μ μλ” κ²ƒμ€ μ•„λ‹λ‹¤. μΈν„°λ½νΈ ν”λκ·Έκ°€ λ¶κ°€λ¥μΌλ΅ μ„¤μ •λμ–΄ μλ”λΌλ„ λ¬΄μ‹ν•  μ μ—†λ” μΈν„°λ½νΈ μ”μ²­λ„ μλ‹¤.
λ¬΄μ‹ν•  μ μ—†λ” ν•λ“μ›¨μ–΄ μΈν„°λ½νΈλ” κ°€μ¥ μ°μ„ μμ„κ°€ λ†’μ€, λ‹¤μ‹ λ§ν•΄ κ°€μ¥ λ¨Όμ € μ²λ¦¬ν•΄μ•Ό ν•λ” μΈν„°λ½νΈλ¥Ό λ§ν•λ‹¤. μ •μ „μ΄λ‚ ν•λ“μ›¨μ–΄ κ³ μ¥μΌλ΅ μΈν• μΈν„°λ½νΈκ°€ μ΄μ— ν•΄λ‹Ήν•λ‹¤.
μ¦‰, ν•λ“μ›¨μ–΄ μΈν„°λ½νΈμ—λ” μΈν„°λ½νΈ ν”λκ·Έλ΅ **λ§‰μ„ μ μλ” μΈν„°λ½νΈ(maskable interrupt)** μ™€ **λ§‰μ„ μ μ—†λ” μΈν„°λ½νΈ(non maskable interrupt)** κ°€ μλ‹¤.
<br/>
<br/>
<img src="https://github.com/user-attachments/assets/be4aaba8-78d3-4f6f-9baa-9ad3276398bd" width="420"/><br/>

> λ§‰μ„ μ μ—†λ” μΈν„°λ½νΈλ” NMI(Non Maskable Interrupt)λΌκ³ λ„ λ¶€λ¥Έλ‹¤.

CPUκ°€ μΈν„°λ½νΈ μ”μ²­μ„ λ°›μ•„λ“¤μ΄κΈ°λ΅ ν–λ‹¤λ©΄ CPUλ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ΄λΌλ” ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•λ‹¤.
**μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(ISE, Interrupt Service Routine)** μ€ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•κΈ° μ„ν• ν”„λ΅κ·Έλ¨μΌλ΅, **μΈν„°λ½νΈ ν•Έλ“¤λ¬(interrupt handler)** λΌκ³ λ„ λ¶€λ¥Έλ‹¤.
μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ€ **μ–΄λ–¤ μΈν„°λ½νΈκ°€ λ°μƒν–μ„ λ• ν•΄λ‹Ή μΈν„°λ½νΈλ¥Ό μ–΄λ–»κ² μ²λ¦¬ν•κ³  μ‘λ™ν•΄μ•Ό ν• μ§€μ— λ€ν• μ •λ³΄**λ΅ μ΄λ£¨μ–΄μ§„ ν”„λ΅κ·Έλ¨μ΄λ‹¤.
μ”μ»¨λ€ CPUκ°€ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ‹¤λ” λ§μ€ **μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•κ³ , λ³Έλ μν–‰ν•λ μ‘μ—…μΌλ΅ λ‹¤μ‹ λλμ•„μ¨λ‹¤**λ” λ§κ³Ό κ°™λ‹¤.

<img src="https://github.com/user-attachments/assets/47eeec95-4309-40cf-ad17-53f2cbf05d92" width="580"/><br/>

μ—¬κΈ°κΉμ§€ λ³΄λ©΄ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ κ³Όμ •μ΄ μΌλ°μ μΈ ν•¨μμ μ‹¤ν–‰ κ³Όμ •κ³Ό λ‘κ°™λ‹¤. μ‹¤μ λ΅ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•λ” κ²ƒμ€ λ³Έμ§μ μΌλ΅ ν•¨μλ¥Ό μ‹¤ν–‰ν•λ” κ²ƒκ³Ό λ‹¤λ¥΄μ§€ μ•λ‹¤.
μ‹¤ν–‰μ μ΅°κ±΄μ΄ μ¶©μ΅±λλ©΄ μ‹¤ν–‰λλ” ν•¨μμ™€ κ°™λ‹¤.

μ…μ¶λ ¥μ¥μΉλ§λ‹¤ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•κΈ° μ„ν• λ™μ‘μ΄ λ‹¤λ¥΄λ―€λ΅ μ…μ¶λ ¥μ¥μΉλ§λ‹¤ κ°κΈ° λ‹¤λ¥Έ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ κ°€μ§€κ³  μλ‹¤.
μ¦‰, λ©”λ¨λ¦¬μ—λ” μ—¬λ¬ κ°μ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄λ“¤μ΄ μ €μ¥λμ–΄ μκ³ , μ΄λ“¤ ν•λ‚ ν•λ‚κ°€ **'μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ μ–΄λ–»κ² ν–‰λ™ν•΄μ•Ό ν• μ§€'λ¥Ό μ•λ ¤ μ£Όλ” ν”„λ΅κ·Έλ¨**μ΄λΌκ³  λ³΄λ©΄ λλ‹¤.

κ·Έλ ‡λ‹¤λ©΄ CPUκ°€ κ°κΈ° λ‹¤λ¥Έ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄λ“¤μ„ κµ¬λ¶„ν•  μ μμ–΄μ•Ό ν•λ”λ°, CPUλ” μλ§μ€ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄λ“¤μ„ κµ¬λ¶„ν•κΈ° μ„ν•΄ μΈν„°λ½νΈ λ²΅ν„°λ¥Ό μ΄μ©ν•λ‹¤.
**μΈν„°λ½νΈ λ²΅ν„°(interrupt vector)** λ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹λ³„ν•κΈ° μ„ν• μ •λ³΄μ΄λ‹¤. CPUλ” ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ μ”μ²­μ„ λ³΄λ‚Έ λ€μƒμΌλ΅λ¶€ν„° λ²„μ¤λ¥Ό ν†µν•΄ μΈν„°λ½νΈ λ²΅ν„°λ¥Ό μ „λ‹¬λ°›λ”λ‹¤.
μΈν„°λ½νΈ λ²΅ν„°κ°€ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ μ‹μ‘ μ£Όμ†λ¥Ό ν¬ν•¨ν•κ³  μκΈ° λ•λ¬Έμ— CPUλ” μΈν„°λ½νΈ λ²΅ν„°λ¥Ό ν†µν•΄ μ²μλ¶€ν„° νΉμ • μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•  μ μλ‹¤.
κ°€λ Ή λ‹¤μ κ·Έλ¦Όμ— μλ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ Bκ°€ ν”„λ¦°ν„°μ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ΄λΌκ³  κ°€μ •ν•΄ λ³΄μ.

<img src="https://github.com/user-attachments/assets/535fbf43-2ced-4c15-a266-d97dd81cc400" width="500"/><br/>

CPUκ°€ μ‘μ—…μ„ μν–‰ν•λ” λ„μ¤‘μ— ν”„λ¦°ν„° μΈν„°λ½νΈκ°€ λ°μƒν• κ²½μ°, CPUλ” μ „λ‹¬λ°›μ€ μΈν„°λ½νΈ λ²΅ν„°λ¥Ό μ°Έμ΅°ν•μ—¬ ν”„λ¦°ν„° μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ μ‹μ‘ μ£Όμ†(μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ Bμ μ‹μ‘ μ£Όμ†)λ¥Ό μ•μ•„λ‚΄κ³ ,
μ΄ μ‹μ‘ μ£Όμ†λ¶€ν„° μ‹¤ν–‰ν•λ©΄μ„ ν”„λ¦°ν„°μ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•λ‹¤.

μ •λ¦¬ν•μλ©΄, CPUκ°€ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” κ²ƒμ€ **μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•κ³ , λ³Έλ μν–‰ν•λ μ‘μ—…μΌλ΅ λ‹¤μ‹ λλμ•„μ¨λ‹¤**λ” λ§κ³Ό κ°™λ‹¤.
κ·Έλ¦¬κ³  CPUκ°€ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•λ ¤λ©΄ **μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ μ‹μ‘ μ£Όμ†**λ¥Ό μ•μ•„μ•Ό ν•λ©°, μ΄λ” **μΈν„°λ½νΈ λ²΅ν„°**λ¥Ό ν†µν•΄ μ• μ μλ‹¤.

μ—¬λ ν”„λ΅κ·Έλ¨κ³Ό λ§μ°¬κ°€μ§€λ΅ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄ λν• λ°μ΄ν„°μ™€ λ…λ Ήμ–΄λ΅ μ΄λ£¨μ–΄μ Έ μκΈ° λ•λ¬Έμ— μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄λ„ ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°λ¥Ό λΉ„λ΅―ν• λ μ§€μ¤ν„°λ“¤μ„ μ‚¬μ©ν•λ©΄μ„ μ‹¤ν–‰λλ‹¤.
μ΄λ• μΈν„°λ½νΈ μ”μ²­μ„ λ°›κΈ° μ§μ „κΉμ§€ CPUκ°€ μν–‰ν•κ³  μμ—λ μΌμ€ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ΄ λλ‚λ©΄ λλμ•„μ™€μ„ λ§μ € μν–‰λμ–΄μ•Ό ν•λ―€λ΅ μ§€κΈκΉμ§€μ μ‘μ—…λ“¤μ„ μ–΄λ”κ°€μ— **λ°±μ—…**ν•΄ λ‘¬μ•Ό ν•λ‹¤.
λ”°λΌμ„ CPUλ” μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•κΈ° μ „μ— ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„° κ°’ λ“± **ν„μ¬ ν”„λ΅κ·Έλ¨μ„ μ¬κ°ν•κΈ° μ„ν•΄ ν•„μ”ν• λ¨λ“  λ‚΄μ©**μ„ λ©”λ¨λ¦¬ λ‚΄ **μ¤νƒ**μ— λ°±μ—…ν•λ‹¤.

κ·Έλ¦¬κ³  λ‚μ„ μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ μ‹μ‘ μ£Όμ†κ°€ μ„μΉν• κ³³μΌλ΅ ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„° κ°’μ„ κ°±μ‹ ν•κ³ , μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•λ‹¤.
μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄μ„ λ¨λ‘ μ‹¤ν–‰ν•λ©΄, λ‹¤μ‹ λ§ν•΄ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•κ³  λ‚λ©΄ μ¤νƒμ— μ €μ¥ν•΄ λ‘” ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„° λ“±μ„ λ‹¤μ‹ λ¶λ¬μ¨ λ’¤ μ΄μ „κΉμ§€ μν–‰ν•λ μ‘μ—…μ„ μ¬κ°ν•λ‹¤.

<img src="https://github.com/user-attachments/assets/9a2e0425-fc2f-44d4-a55c-873d588ae59a" width="520"/><br/>
<br/>

μ§€κΈκΉμ§€ CPUκ°€ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” κ³Όμ •μ„ μ•μ•„λ³΄μ•λ‹¤. **μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” μΈν„°λ½νΈ μ‚¬μ΄ν΄**κΉμ§€ μ¶”κ°€ν• λ…λ Ήμ–΄ μ‚¬μ΄ν΄μ λ¨μµμ€ λ‹¤μκ³Ό κ°™λ‹¤.
κ²°κµ­ CPUλ” μ΄μ™€ κ°™μ€ κ³Όμ •μ„ λ°λ³µν•λ©° ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•΄ λ‚κ°„λ‹¤κ³  ν•  μ μλ‹¤.

<img src="https://github.com/user-attachments/assets/3d6824f9-47f4-4f1e-ae4b-0bf21507ca78" width="470"/><br/>
<br/>
#### [μμ™Έ]
μμ™Έ(λ™κΈ° μΈν„°λ½νΈ)μ μΆ…λ¥μ—λ” ν΄νΈ, νΈλ©, μ¤‘λ‹¨, μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ λ“±μ΄ μλ‹¤. CPUλ” μμ™Έκ°€ λ°μƒν•λ©΄ ν•λ μΌμ„ μ¤‘λ‹¨ν•κ³  ν•΄λ‹Ή μμ™Έλ¥Ό μ²λ¦¬ν•λ‹¤.
κ·Έλ¦¬κ³  μμ™Έλ¥Ό μ²λ¦¬ν•κ³  λ‚λ©΄ λ‹¤μ‹ λ³Έλ ν•λ μ‘μ—…μΌλ΅ λλμ•„μ™€ μ‹¤ν–‰μ„ μ¬κ°ν•λ‹¤.
CPUκ°€ λ³Έλ ν•λ μ‘μ—…μΌλ΅ λλμ•„μ™”μ„ λ• **μμ™Έκ°€ λ°μƒν• λ…λ Ήμ–΄**λ¶€ν„° μ‹¤ν–‰ν•λλƒ, **μμ™Έκ°€ λ°μƒν• λ…λ Ήμ–΄μ λ‹¤μ λ…λ Ήμ–΄**λ¶€ν„° μ‹¤ν–‰ν•λλƒμ— λ”°λΌ ν΄νΈμ™€ νΈλ©μΌλ΅ λ‚λ μ μλ‹¤.

<img src="https://github.com/user-attachments/assets/eb48b392-2a04-4962-983d-d089ba311910" width="450"/><br/>

**ν΄νΈ(falut)** λ” μμ™Έλ¥Ό μ²λ¦¬ν• μ§ν›„μ— **μμ™Έκ°€ λ°μƒν• λ…λ Ήμ–΄λ¶€ν„°** μ‹¤ν–‰μ„ μ¬κ°ν•λ” μμ™Έμ΄λ‹¤.
κ°€λ Ή CPUκ°€ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•λ ¤κ³  ν•  λ•, λ…λ Ήμ–΄ μ‹¤ν–‰μ„ μ„ν•΄ κΌ­ ν•„μ”ν• λ°μ΄ν„°κ°€ λ©”λ¨λ¦¬κ°€ μ•„λ‹ λ³΄μ΅°κΈ°μ–µμ¥μΉμ— μ €μ¥λμ–΄ μλ‹¤κ³  κ°€μ •ν•΄ λ³΄μ.
ν”„λ΅κ·Έλ¨μ΄ μ‹¤ν–‰λκΈ° μ„ν•΄μ„λ” λ°μ΄ν„°κ°€ λ°λ“μ‹ λ©”λ¨λ¦¬μ— μ €μ¥λμ–΄ μμ–΄μ•Ό ν•λ―€λ΅ CPUλ” ν΄νΈλ¥Ό λ°μƒμ‹ν‚¤κ³ , λ³΄μ΅°κΈ°μ–µμ¥μΉλ΅λ¶€ν„° ν•„μ”ν• λ°μ΄ν„°λ¥Ό λ©”λ¨λ¦¬λ΅ κ°€μ Έμ™€ μ €μ¥ν•κ² λλ‹¤.
CPUλ” ν•„μ”ν• λ°μ΄ν„°λ¥Ό λ³΄μ΅°κΈ°μ–µμ¥μΉλ΅λ¶€ν„° λ©”λ¨λ¦¬λ΅ κ°€μ§€κ³  μ™”μΌλ―€λ΅ λ‹¤μ‹ μ‹¤ν–‰μ„ μ¬κ°ν•΄ **ν΄νΈκ°€ λ°μƒν• κ·Έ λ…λ Ήμ–΄λ¶€ν„°** μ‹¤ν–‰ν•΄ λ‚κ° κ²ƒμ΄λ‹¤(μ΄λ¥Ό νμ΄μ§€ ν΄νΈλΌκ³  ν•λ‹¤).
μ΄μ²λΌ μμ™Έκ°€ λ°μƒν• λ…λ Ήμ–΄λ¶€ν„° μ‹¤ν–‰ν•΄ λ‚κ°€λ” μμ™Έλ¥Ό ν΄νΈλΌκ³  ν•λ‹¤.

<img src="https://github.com/user-attachments/assets/342a651c-e314-4ba2-abf5-5de76b07d7da" width="420"/><br/>
<br/>
**νΈλ©(trap)** μ€ μμ™Έλ¥Ό μ²λ¦¬ν• μ§ν›„μ— **μμ™Έκ°€ λ°μƒν• λ…λ Ήμ–΄μ λ‹¤μ λ…λ Ήμ–΄λ¶€ν„°** μ‹¤ν–‰μ„ μ¬κ°ν•λ” μμ™Έμ΄λ‹¤. λ€ν‘μ μΈ μ‚¬λ΅€λ΅ λ””λ²„κΉ…μ λΈλ μ΄ν¬ ν¬μΈνΈλ¥Ό κΌ½μ„ μ μλ‹¤.
λ””λ²„κΉ…μ„ ν•  λ•λ” λΈλ μ΄ν¬ ν¬μΈνΈλ¥Ό μ§€μ •ν•μ—¬ νΉμ • μ½”λ“κ°€ μ‹¤ν–‰λλ” μκ°„μ— ν”„λ΅κ·Έλ¨μ„ λ©μ¶”κ² ν•  μ μλ‹¤.
ν”„λ΅κ·Έλ¨μ„ μ¤‘λ‹¨μ‹ν‚¤κ³  λ””λ²„κΉ…μ΄ λλ‚λ©΄(νΈλ©μ„ μ²λ¦¬ν•κ³  λ‚λ©΄) **νΈλ©μ΄ λ°μƒν• κ·Έ λ‹¤μ λ…λ Ήμ–΄**λ¶€ν„° μ‹¤ν–‰ν•΄ λ‚κ°„λ‹¤.
μ΄μ²λΌ μμ™Έκ°€ λ°μƒν• λ…λ Ήμ–΄μ λ‹¤μ λ…λ Ήμ–΄λ¶€ν„° μ‹¤ν–‰μ„ μ¬κ°ν•λ” μμ™Έλ¥Ό νΈλ©μ΄λΌκ³  ν•λ‹¤.

<img src="https://github.com/user-attachments/assets/b1299f30-96e2-4f3e-98df-8a4e550ee0e7" width="420"/><br/>
<br/>
**μ¤‘λ‹¨(abort)** μ€ CPUκ°€ μ‹¤ν–‰ μ¤‘μΈ **ν”„λ΅κ·Έλ¨μ„ κ°•μ λ΅ μ¤‘λ‹¨**μ‹ν‚¬ μλ°–μ— μ—†λ” μ‹¬κ°ν• μ¤λ¥λ¥Ό λ°κ²¬ν–μ„ λ• λ°μƒν•λ” μμ™Έμ΄λ‹¤.
κ·Έ λ°–μ— **μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ(shoftware interrupt)** λ” μ‹μ¤ν… μ½μ΄ λ°μƒν–μ„ λ• λ°μƒν•λ” μμ™Έμ΄λ‹¤.
<br/>
<br/>
### π“ CPU μ„±λ¥ ν–¥μƒμ„ μ„ν• μ„¤κ³„
μ¤λλ‚  μ°λ¦¬κ°€ μ‚¬μ©ν•λ” CPUμ—λ” μƒκ°ν–λ κ²ƒλ³΄λ‹¤ ν›¨μ”¬ λ” λ³µμ΅ν•κ³  μ¤‘μ”ν• κ°λ…λ“¤μ΄ λ‹΄κ²¨ μλ‹¤.
μλ§μ€ κ³Όν•™μμ™€ μ—”μ§€λ‹μ–΄λ“¤μ΄ μ΅°κΈμ΄λΌλ„ λ” λΉ λ¥Έ CPUλ¥Ό λ§λ“¤κΈ° μ„ν•΄ μƒλ΅μ΄ CPU μ„¤κ³„ λ° λ…λ Ήμ–΄ μ²λ¦¬ κΈ°λ²•λ“¤μ„ κ³ μ•ν•΄λƒκΈ° λ•λ¬Έμ΄λ‹¤.
μ΄λ²μ—λ” ν΄λ­κ³Ό μ½”μ–΄, μ¤λ λ“ λ“± CPUμ μ„±λ¥ ν–¥μƒκ³Ό κ΄€λ ¨λ μ£Όμ” κ°λ… λ° μ„¤κ³„ κΈ°λ²•, κ·Έλ¦¬κ³  μ΄μ™€ κ΄€λ ¨ν•΄ λ™μ‹μ„±κ³Ό λ³‘λ ¬μ„±μ μ •μ λ° μ°¨μ΄μ μ— λ€ν•΄ μ•μ•„λ³΄μ.

#### [CPU ν΄λ­ μ†λ„]
CPUλ¥Ό κµ¬λ§¤ν•λ ¤κ³  ν•λ©΄ νλ§¤ νμ΄μ§€λ§λ‹¤ λΉ μ§€μ§€ μ•κ³  λ“±μ¥ν•λ” ν‚¤μ›λ“κ°€ μλ‹¤. λ°”λ΅ ν΄λ­μ΄λ‹¤. **ν΄λ­(clock)** μ΄λ€ **μ»΄ν“¨ν„°μ λ¶€ν’μ„ μΌμ‚¬λ¶λ€ν•κ² μ›€μ§μΌ μ μκ² ν•λ” μ‹κ°„μ λ‹¨μ„**μ΄λ‹¤.
ν΄λ­μ 'λ‘-λ”±-λ‘-λ”±-' μ£ΌκΈ°μ— λ§μ¶° μ΄ λ μ§€μ¤ν„°μ—μ„ λ‹¤λ¥Έ λ μ§€μ¤ν„°λ΅ λ°μ΄ν„°κ°€ μ΄λ™ν•κ±°λ‚ ALUμ—μ„ μ—°μ‚°μ΄ μν–‰λκ³ , λ©”λ¨λ¦¬μ— μ €μ¥λ λ…λ Ήμ–΄λ¥Ό μ½μ–΄ λ“¤μ΄λ” κ²ƒμ΄λ‹¤.

**ν΄λ­ μ†λ„**λ” ν—¤λ¥΄μΈ (Hz) λ‹¨μ„λ΅ μΈ΅μ •λλ”λ°, μ΄λ” ν΄λ­μ΄ 1μ΄μ— λ‡ λ² λ°λ³µλλ”μ§€λ¥Ό λ‚νƒ€λ‚Έλ‹¤. κ°€λ Ή ν΄λ­μ΄ 'λ‘-λ”±-'ν•κ³  1μ΄μ— 100λ² λ°λ³µλλ” CPUκ°€ μλ‹¤λ©΄, μ΄ CPUμ ν΄λ­ μ†λ„λ” 100HzμΈ μ…μ΄λ‹¤.
μµκ·Όμ—λ” CPUμ ν΄λ­ μ†λ„κ°€ λ§¤μ° λΉ¨λΌμ Έμ„ λ” λΉ λ¥Έ λ“±κΈ‰μΈ κΈ°κ°€ν—¤λ¥΄μΈ (GHz) λ‹¨μ„λ΅ μΈ΅μ •ν•λ” κ²ƒμ΄ μΌλ°μ μ΄λ‹¤.

<img src="https://github.com/user-attachments/assets/d8ae8001-736c-41fa-b3b9-b4cf82e5c122" width="450"/><br/>

> 1GHzλ” 1000000000(10^9)Hzμ΄λ‹¤.

ν΄λ­ μ†λ„κ°€ λ†’μ•„μ§€λ©΄ CPUλ” λ…λ Ήμ–΄ μ‚¬μ΄ν΄μ„ λ” λΉ λ¥΄κ² λ°λ³µν•κ³ , λ‹¤λ¥Έ λ¶€ν’λ“¤λ„ κ·Έμ— λ°λ§μ¶° λ” λΉ λ¥΄κ² μ‘λ™ν•  κ²ƒμ΄λΌκ³  κΈ°λ€ν•  μ μλ‹¤. μ‹¤μ λ΅ ν΄λ­ μ†λ„κ°€ λ†’μ€ CPUλ” μΌλ°μ μΌλ΅ μ„±λ¥μ΄ μΆ‹λ‹¤.
μ΄λ° μ μ—μ„ **ν΄λ­ μ†λ„λ” CPUμ μ†λ„ λ‹¨μ„λ΅ κ°„μ£ΌλκΈ°λ„ ν•λ‹¤.**
ν•μ§€λ§ ν΄λ­ μ†λ„λ¥Ό ν•„μ” μ΄μƒμΌλ΅ λ†’μ΄λ©΄ μ»΄ν“¨ν„°μ **λ°μ—΄**μ΄ μ‹¬ν•΄μ§ μ μκΈ° λ•λ¬Έμ— ν΄λ­ μ†λ„λ¥Ό λ†’μ΄λ” κ²ƒλ§μΌλ΅ CPUμ μ„±λ¥μ„ λ†’μ΄λ” λ°μ—λ” ν•κ³„κ°€ μλ‹¤.
<br/>
#### [λ©€ν‹°μ½”μ–΄μ™€ λ©€ν‹°μ¤λ λ“]
ν΄λ­ μ†λ„λ¥Ό λ†’μ΄λ” λ°©λ²• μ™Έμ—λ„ μ½”μ–΄ μλ‚ μ¤λ λ“ μλ¥Ό λλ¦¬λ” λ°©λ²•μΌλ΅ CPUμ μ„±λ¥μ„ λ†’μΌ μ μλ‹¤. **μ½”μ–΄(core)** λ€ CPU λ‚΄μ—μ„ λ…λ Ήμ–΄λ¥Ό μ½μ–΄ λ“¤μ΄κ³ , ν•΄μ„ν•κ³ , μ‹¤ν–‰ν•λ” λ¶€ν’μ„ μλ―Έν•λ‹¤.
μ•μ„ μ°λ¦¬λ” 'λ…λ Ήμ–΄λ¥Ό μ½μ–΄ λ“¤μ΄κ³ , ν•΄μ„ν•κ³ , μ‹¤ν–‰ν•λ” λ¶€ν’'μ„ CPUλΌκ³  λ°°μ› λ‹¤. μ΄λ” λ§μ€ μ „κ³µ μ„μ μ—μ„ λ‹¤λ£¨λ” μ „ν†µμ μΈ κ΄€μ μ— λ”°λ¥Έ μ •μμ΄λ‹¤.
μ „κ³µ μ„μ λ“¤μ μ „ν†µμ  κ΄€μ μ—μ„ 'λ…λ Ήμ–΄λ¥Ό μ½μ–΄ λ“¤μ΄κ³ , ν•΄μ„ν•κ³ , μ‹¤ν–‰ν•λ” λ¶€ν’'μ€ μ›μ²μ μΌλ΅ CPU ν•λ‚λ§ μ΅΄μ¬ν•  μ μμ—κΈ° λ•λ¬Έμ΄λ‹¤.
ν•μ§€λ§ μ¤λλ‚  κΈ°μ μ  λ°μ „μ„ κ±°λ“­ν• CPU μ•μ—λ” 'λ…λ Ήμ–΄λ¥Ό μ½μ–΄ λ“¤μ΄κ³ , ν•΄μ„ν•κ³ , μ‹¤ν–‰ν•λ” λ¶€ν’'λ“¤ μ—¬λ¬ κ°κ°€ μ–Όλ§λ“ μ§€ μ΅΄μ¬ν•  μ μκ² λμ—κ³ , μ΄μ— μ½”μ–΄λΌλ” μ΄λ¦„μ„ λ¶™μΈ κ²ƒμ΄λ‹¤.
<br/>
<br/>
<img src="https://github.com/user-attachments/assets/4faa370f-0080-4178-bca0-8848239ec357" width="600"/><br/>

μ–΄λ–¤ CPUλ¥Ό μ„¤λ…ν•λ” κΈ€μ— μ½”μ–΄κ°€ 8κ°λΌκ³  λ…μ‹λμ–΄ μλ‹¤λ©΄ CPU λ‚΄λ¶€μ—μ„ λ…λ Ήμ–΄λ¥Ό μ½μ–΄ λ“¤μ΄κ³ , ν•΄μ„ν•κ³ , μ‹¤ν–‰ν•λ” λ¶€ν’μ΄ 8κ°λΌλ” μ΄μ•ΌκΈ°μ΄λ‹¤.
μ΄λ ‡κ² μ—¬λ¬ κ°μ μ½”μ–΄λ¥Ό ν¬ν•¨ν•κ³  μλ” CPUλ” **λ©€ν‹°μ½”μ–΄ CPU**, νΉμ€ **λ©€ν‹°μ½”μ–΄ ν”„λ΅μ„Έμ„**λΌκ³  λ¶€λ¥Έλ‹¤. CPU μ•μ— λ‡ κ°μ μ½”μ–΄κ°€ ν¬ν•¨λμ–΄ μλ”μ§€μ— λ”°λΌ λ‹¤μκ³Ό κ°™μ΄ λ©€ν‹°μ½”μ–΄ CPUμ λ…μΉ­μ΄ λ°”λ€κ² λλ‹¤.

<img src="https://github.com/user-attachments/assets/0484cb78-8817-4c03-9787-976f30d2c36f" width="320"/><br/>
<br/>
μ΄λ²μ—λ” **μ¤λ λ“**μ— λ€ν•΄ μ•μ•„λ³΄μ. **μ¤λ λ“(thread)** μ μ‚¬μ „μ  μλ―Έλ” 'μ‹¤ν–‰ νλ¦„μ λ‹¨μ„'μ΄λ‹¤. ν•μ§€λ§ μ΄κ²ƒμ„ ν™μ κ·Έλ€λ΅ μ΄ν•΄ν•λ‹¤λ©΄ νΌλ€μ¤λ¬μΈ μ μλ‹¤.
'μ¤λ λ“'λ” ν”„λ΅κ·Έλλ° μ–Έμ–΄μ™€ CPU, μ΄μμ²΄μ μ—λ„ λ“±μ¥ν•λ” λ²”μ©μ„± λ†’μ€ μ©μ–΄μΈ νƒ“μ— κ°κ°μ μ©λ΅€ λν• μ΅°κΈμ”© λ‹¤λ¥΄κΈ° λ•λ¬Έμ΄λ‹¤.
νΌλ€μ„ λ°©μ§€ν•κΈ° μ„ν•΄ CPUμ—μ„ μ‚¬μ©ν•λ” **ν•λ“μ›¨μ–΄μ μΈ μ¤λ λ“(μ΄ν• ν•λ“μ›¨μ–΄ μ¤λ λ“)** μ™€ ν”„λ΅κ·Έλλ° μ–Έμ–΄ λ° μ΄μμ²΄μ μ—μ„ μ‚¬μ©ν•λ” **μ†ν”„νΈμ›¨μ–΄μ μΈ μ¤λ λ“(μ΄ν• μ¤λ λ“)** λ΅ λ‚λ„μ–΄ κΈ°μ–µν•κΈΈ λ°”λ€λ‹¤.

**ν•λ“μ›¨μ–΄ μ¤λ λ“**λ€ **ν•λ‚μ μ½”μ–΄κ°€ λ™μ‹μ— μ²λ¦¬ν•λ” λ…λ Ήμ–΄μ λ‹¨μ„**λ¥Ό μλ―Έν•λ‹¤.
κ°™μ€ μλ―Έλ΅ 'ν•λ‚μ μ½”μ–΄λ΅ μ—¬λ¬ λ…λ Ήμ–΄λ¥Ό λ™μ‹μ— μ²λ¦¬ν•λ” CPU'λ¥Ό **λ©€ν‹°μ¤λ λ“(multithread) ν”„λ΅μ„Έμ„** νΉμ€ **λ©€ν‹°μ¤λ λ“ CPU**λΌκ³  ν•λ‹¤.
μλ¥Ό λ“¤μ–΄ λ…λ Ήμ–΄λ¥Ό μ½μ–΄ λ“¤μ΄κ³ , ν•΄μ„ν•κ³ , μ‹¤ν–‰ν•λ” λ¶€ν’ ν•λ‚κ°€ ν• λ²μ— ν•λ‚μ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬ν•λ‹¤λ©΄ μ΄λ” **1μ½”μ–΄ 1μ¤λ λ“ CPU**μ΄κ³ , λ…λ Ήμ–΄λ¥Ό μ½μ–΄ λ“¤μ΄κ³ , ν•΄μ„ν•κ³ , μ‹¤ν–‰ν•λ” λ¶€ν’ 2κ°κ°€ ν• λ²μ—
4κ°μ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬ν•λ‹¤λ©΄ μ΄λ” **2μ½”μ–΄ 4μ¤λ λ“ CPU**μΈ κ²ƒμ΄λ‹¤.

<img src="https://github.com/user-attachments/assets/8969e7ef-a141-4eca-8857-84ab1daebe96" width="320"/><br/>

ν•λ“μ›¨μ–΄ μ¤λ λ“λ” λ©”λ¨λ¦¬ μ† ν”„λ΅κ·Έλ¨μ μ…μ¥μ—μ„ λ΄¤μ„ λ• 'ν• λ²μ— ν•λ‚μ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬ν•λ” 1κ°μ CPU'μ™€ λ‹¤λ¥Ό λ°” μ—†λ‹¤.
λ§μ°¬κ°€μ§€λ΅ 2μ½”μ–΄ 4μ¤λ λ“ CPUλ¥Ό λ©”λ¨λ¦¬ μ† ν”„λ΅κ·Έλ¨μ μ…μ¥μ—μ„ λ³΄λ©΄ 'ν• λ²μ— ν•λ‚μ λ…λ Ήμ–΄λ¥Ό μ²λ¦¬ν•λ” 4κ°μ CPU'κ°€ μλ” κ²ƒμ²λΌ λ³΄μΌ κ²ƒμ΄λ‹¤.
κ·Έλμ„ ν•λ“μ›¨μ–΄ μ¤λ λ“λ¥Ό **λ…Όλ¦¬ ν”„λ΅μ„Έμ„(logical processor)** λΌκ³  λ¶€λ¥΄κΈ°λ„ ν•λ‹¤.

ν•νΈ, **μ†ν”„νΈμ›¨μ–΄ μ¤λ λ“**λ€ **ν•λ‚μ ν”„λ΅κ·Έλ¨μ—μ„ λ…λ¦½μ μΌλ΅ μ‹¤ν–‰λλ” λ‹¨μ„**λ¥Ό μλ―Έν•λ‹¤.
μ΄μμ²΄μ μ— λ“±μ¥ν•λ” μ¤λ λ“κ°€ λ°”λ΅ μ΄ μ†ν”„νΈμ›¨μ–΄ μ¤λ λ“μΈλ°, 'μ–΄λ–¤ ν”„λ΅κ·Έλ¨μ΄ μ—¬λ¬ (μ†ν”„νΈμ›¨μ–΄μ )μ¤λ λ“λ¥Ό ν†µν•΄ μ‹¤ν–‰λ  μ μλ‹¤'λ” λ§μ€ 'λ©”λ¨λ¦¬μ— μ μ¬λ ν•΄λ‹Ή ν”„λ΅κ·Έλ¨μ„ κµ¬μ„±ν•λ” μ—¬λ¬ λ¶€λ¶„μ΄ λ™μ‹μ—
μ‹¤ν–‰λ  μ μλ‹¤'λ” λ§κ³  κ°™λ‹¤. μ μν•  μ μ€ ν•λ“μ›¨μ–΄ μ¤λ λ“κ°€ ν•λ‚μΈ CPUλ„ μ΄λ¬ν• ν”„λ΅κ·Έλ¨μ„ μ¶©λ¶„ν μ‹¤ν–‰ν•  μ μλ‹¤λ” μ μ΄λ‹¤.

μ§μ ‘ ν™•μΈν•΄λ³΄μ. λ‹¤μμ€ 1μ½”μ–΄ 1μ¤λ λ“ CPUλ¥Ό νƒ‘μ¬ν• μ»΄ν“¨ν„° ν™κ²½(ν„°λ―Έλ„)μ„ λ‚νƒ€λ‚Έλ‹¤. λ¨λ“  λ‚΄μ©μ„ κΉμ΄ μ΄ν•΄ν•  ν•„μ”λ” μ—†μΌλ―€λ΅ λ°•μ¤λ΅ ν‘κΈ°λ λ¶€λ¶„λ§ μ‚΄ν΄λ³΄κ² λ‹¤.
CPU μ½”μ–΄ μ(cpu cores)μ™€ μ½”μ–΄λ³„ μ¤λ λ“ μ(Thread(s) per core)κ°€ κ°κ° 1κ°μΈ κ²ƒμ„ λ³Ό μ μλ‹¤.

<img src="https://github.com/user-attachments/assets/11bb7bab-4b03-46dd-9530-ddd9d3806df8" width="600"/><br/>

> μ μ‹λ ν„°λ―Έλ„ κ²°κ³Όλ” λ¦¬λ…μ¤(μ°λ¶„ν¬) μ΄μμ²΄μ λ¥Ό μ‚¬μ©ν•λ” μ»΄ν“¨ν„°μ—μ„ μ–»μ—λ‹¤. μ΄μ²λΌ λ¦¬λ…μ¤ μ΄μμ²΄μ μ—μ„λ” λ…λ Ήμ–΄λ¥Ό ν†µν•΄ μ»΄ν“¨ν„°μ μƒνƒλ¥Ό μ• μ μλ‹¤.

1μ½”μ–΄ 1μ¤λ λ“ CPUμ—μ„ λ‹¤μκ³Ό κ°™μ€ μ†μ¤ μ½”λ“λ¥Ό μ‹¤ν–‰ν–λ‹¤κ³  κ°€μ •ν•΄ λ³΄μ. μ½”λ“μ λ¬Έλ²•μ€ μ¤‘μ”ν•μ§€ μ•λ‹¤.
ν•΄λ‹Ή μ½”λ“λ” 3κ°μ μ†ν”„νΈμ›¨μ–΄ μ¤λ λ“λ¥Ό λ§λ“  λ’¤, 'task1, task2, task3'λΌλ” ν•¨μλ¥Ό κ° μ¤λ λ“λ΅ μ‹¤ν–‰ν•λ” νμ΄μ¬ μ½”λ“μ΄λ‹¤.
μ½”λ“λ¥Ό μ‹¤ν–‰ν•λ©΄ μ¤λ λ„ 'thread1, thread2, thread3'κ°€ μƒμ„±λμ–΄ κ°μ 'task1, task2, task3'λ¥Ό λ™μ‹μ— μ‹¤ν–‰ν•  κ²ƒμ΄λ‹¤.

#### [arch/thread.py]
```python
import threading
import time

def task1():
    for _ in range(5):
        print("Task 1 is running")
        time.sleep(1)

def task2():
    for _ in range(5):
        print("Tast 2 is running")
        time.sleep(1)

def task3():
    for _ in range(5):
        print("Tast 3 is running")
        time.sleep(1)

thread1 - threading.Thread(target=task1)
thread2 - threading.Thread(target=task2)
thread3 - threading.Thread(target=task3)

thread1.start()
thread2.start()
thread3.start()

thread1.join()
thread2.join()
thread3.join()

print("All tasks are done.")
```
μ½”λ“μ μ‹¤ν–‰ κ²°κ³Όλ” μ–΄λ–»κ² λ κΉ? 1μ½”μ–΄ 1μ¤λ λ“ CPUλ¥Ό μ‚¬μ© μ¤‘μ΄λ―€λ΅ μ‹¤ν–‰μ΄ λ¶κ°€λ¥ν• κΉ? κ·Έλ ‡μ§€ μ•λ‹¤. μ½”λ“λ” λ‹¤μκ³Ό κ°™μ΄ μ •μƒμ μΌλ΅ μ μ‘λ™ν•λ‹¤.

#### [μ‹¤ν–‰ κ²°κ³Ό]
```
Task 1 is running
Task 2 is running
Task 3 is running
Task 1 is running
Task 2 is running
Task 3 is running
Task 1 is running
Task 2 is running
Task 3 is running
Task 1 is running
Task 2 is running
Task 3 is running
Task 1 is running
Task 2 is running
Task 3 is running
All tasks are done.
```
μ•μ„ μ„¤λ…ν–λ μ¤λ λ“μ μ‚¬μ „μ  μ •μλ§μ„ μ•”κΈ°ν–λ‹¤λ©΄ '1μ½”μ–΄ 1μ¤λ λ“ CPUκ°€ μ—¬λ¬ μ¤λ λ“λ΅ λ§λ“¤μ–΄μ§„ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•  μ μλ‹¤'λ” λ§μ„ λ‚©λ“ν•κΈ° μ–΄λ ¤μΈ κ²ƒμ΄λ‹¤.
λ”°λΌμ„ ν•λ“μ›¨μ–΄μ μΈ μ¤λ λ“μ™€ μ†ν”„νΈμ›¨μ–΄μ μΈ μ¤λ λ“μ μλ―Έλ¥Ό κµ¬λ¶„ν•μ—¬ κΈ°μ–µν•΄ λ‘λ” κ²ƒμ΄ μΆ‹λ‹¤.

<img src="https://github.com/user-attachments/assets/eeefc504-c047-4442-b0f5-0b6a54f70507" width="450"/><br/>
<br/>
μ§€κΈκΉμ§€ μ•μ•„λ³Έ CPU ν΄λ­ μ†λ„μ™€ λ©€ν‹°μ½”μ–΄, λ©€ν‹°μ¤λ λ“λ” μλ„μ° μ΄μμ²΄μ μ [μ‘μ—… κ΄€λ¦¬μ] μ°½μ [μ„±λ¥] νƒ­μ—μ„ CPUμ 'μ†λ„, μ½”μ–΄, λ…Όλ¦¬ ν”„λ΅μ„Έμ„' ν•­λ©μΌλ΅ ν™•μΈν•  μ μλ‹¤.

<img src="https://github.com/user-attachments/assets/1b30ce5a-5f40-482c-8fdf-65826e77adea" width="470"/><br/>
<br/>

ν•λ“μ›¨μ–΄ μ¤λ λ“μ™€ μ†ν”„νΈμ›¨μ–΄ μ¤λ λ“μ μ°¨μ΄λ” λ™μ‹μ„±κ³Ό λ³‘λ ¬μ„±μ΄λΌλ” ν‚¤μ›λ“μ μ°¨μ΄λ¥Ό ν†µν•΄ μΆ€ λ” λ…ν™•ν μ΄ν•΄ν•  μ μλ‹¤.
λ™μ‹μ„±κ³Ό λ³‘λ ¬μ„±μ€ λ¨λ‘ 'μ—¬λ¬ μ‘μ—…μ΄ λ™μ‹μ— μ²λ¦¬λλ” μ–‘μƒ'μ„ ν‘ν„ν•λ” λ‹¨μ–΄μ§€λ§, μ„Έλ¶€μ μΈ μλ―Έλ” λ‹¤λ¥΄λ‹¤.

**λ³‘λ ¬μ„±(parallelism)** μ€ μ‘μ—…μ„ λ¬Όλ¦¬μ μΌλ΅ λ™μ‹μ— μ²λ¦¬ν•λ” μ„±μ§μ΄λ‹¤. ν•λ“μ›¨μ–΄ μ¤λ λ“κ°€ 4κ°μΈ CPUκ°€ 4κ°μ λ…λ Ήμ–΄λ¥Ό λ™μ‹μ— μ‹¤ν–‰ν•λ” κ²½μ°λ¥Ό μƒκ°ν•΄ λ³΄μ.
κ°™μ€ μ‹μ μ— μ—¬λ¬ μ‘μ—…μ„ λ™μ‹μ— μ²λ¦¬ν•  μ μμ„ κ²ƒμ΄λ‹¤. μ΄κ²ƒμ΄ λ°”λ΅ λ³‘λ ¬μ„±μ μμ΄λ‹¤.

λ°λ©΄, **λ™μ‹μ„±(concurrency)** μ€ λ™μ‹μ— μ‘μ—…μ„ μ²λ¦¬ν•λ” κ²ƒμ²λΌ λ³΄μ΄λ” μ„±μ§μ„ μλ―Έν•λ‹¤.
μ΄ CPUκ°€ λΉ λ¥΄κ² μ‘μ—…μ„ λ²κ°μ•„ κ°€λ©° μ²λ¦¬ν•  κ²½μ°, μ‚¬μ©μμ λμ—λ” λ§μΉ μ—¬λ¬ μ‘μ—…μ΄ λ™μ‹μ— μ²λ¦¬λλ” κ²ƒμ²λΌ λ³΄μΌ μ μμ§€λ§, λ¬Όλ¦¬μ μΌλ΅ κ°™μ€ μ‹μ μ— μ—¬λ¬ μ‘μ—…μ΄ λ™μ‹μ— μ²λ¦¬λκ³  μλ” κ²ƒμ€ μ•„λ‹λ‹¤.
μ΄κ²ƒμ΄ λ™μ‹μ„±μ μ—μ‹μ΄λ‹¤.

<img src="https://github.com/user-attachments/assets/f1b5405a-f9a5-44b5-87be-4d506084221c" width="470"/><br/>
<br/>
μ¦‰, ν•λ“μ›¨μ–΄ μ¤λ λ“λ” 'λ³‘λ ¬μ„±'μ„ κµ¬ν„ν•κΈ° μ„ν• λ¬Όλ¦¬μ μΈ μ‹¤ν–‰ λ‹¨μ„μ— κ°€κΉκ³ , μ†ν”„νΈμ›¨μ–΄ μ¤λ λ“λ” 'λ™μ‹μ„±'μ„ κµ¬ν„ν•κΈ° μ„ν• λ…Όλ¦¬μ μΈ μ‹¤ν–‰ λ‹¨μ„μ— κ°€κΉλ‹¤.
<br/>
<br/>
### π“ νμ΄ν”„λΌμ΄λ‹μ„ ν†µν• λ…λ Ήμ–΄ λ³‘λ ¬ μ²λ¦¬
**λ…λ Ήμ–΄ λ³‘λ ¬ μ²λ¦¬ κΈ°λ²•(ILP, Instruction-Level Parallelism)** μ€ μ—¬λ¬ λ…λ Ήμ–΄λ¥Ό λ™μ‹μ— μ²λ¦¬ν•μ—¬ CPUλ¥Ό ν•μ‹λ„ μ‰¬μ§€ μ•κ³  μ‘λ™μ‹ν‚΄μΌλ΅μ¨ CPUμ μ„±λ¥μ„ λ†’μ΄λ” κΈ°λ²•μ„ λ§ν•λ‹¤.
ν„λ€ CPUμ λ…λ Ήμ–΄ μ²λ¦¬μ—μ„ μ λ€ λΉ μ§ μ μ—†λ” ν•µμ‹¬ κΈ°μ μ΄λΌκ³  ν•  μ μλ‹¤. λ‹¤μ–‘ν• μΆ…λ¥κ°€ μμ§€λ§, κΌ­ κΈ°μ–µν•΄μ•Ό ν•  λ…λ Ήμ–΄ λ³‘λ ¬ μ²λ¦¬ κΈ°λ²•μ€ **λ…λ Ήμ–΄ νμ΄ν”„λΌμ΄λ‹**μ΄λ‹¤.

λ…λ Ήμ–΄ νμ΄ν”„λΌμ΄λ‹μ„ μ΄ν•΄ν•λ ¤λ©΄ μ°μ„  ν•λ‚μ λ…λ Ήμ–΄κ°€ μ²λ¦¬λλ” κ³Όμ •μ„ λΉ„μ·ν• μ‹κ°„ κ°„κ²©μΌλ΅ λ‚λ„μ–΄ λ³΄μ•„μ•Ό ν•λ‹¤. μΌλ°μ μΌλ΅ λ‹¤μκ³Ό κ°™μ€ κ°„κ²©μΌλ΅ λ‚λ μ μλ‹¤.

- [1] λ…λ Ήμ–΄ μΈμ¶(Instruction Fetch)
- [2] λ…λ Ήμ–΄ ν•΄μ„(Instruction Decode)
- [3] λ…λ Ήμ–΄ μ‹¤ν–‰(Execute Instruction)
- [4] κ²°κ³Ό μ €μ¥(Write Back)

μ—¬κΈ°μ„ μ¤‘μ”ν• μ μ€ κ°™μ€ λ‹¨κ³„κ°€ κ²ΉμΉμ§€λ§ μ•λ”λ‹¤λ©΄ CPUκ°€ **κ°κ°μ λ‹¨κ³„λ¥Ό λ™μ‹μ— μ‹¤ν–‰ν•  μ μλ‹¤**λ” μ μ΄λ‹¤.
CPUλ” ν•λ‚μ λ…λ Ήμ–΄κ°€ **μΈμ¶**λλ” λ™μ• λ‹¤λ¥Έ λ…λ Ήμ–΄λ¥Ό **μ‹¤ν–‰**ν•  μ μκ³ , ν•λ‚μ λ…λ Ήμ–΄κ°€ μ‹¤ν–‰λλ” λ™μ• μ—°μ‚°μ κ²°κ³Όλ¥Ό **μ €μ¥**ν•  μ μλ‹¤. μ΄λ¥Ό κ·Έλ¦ΌμΌλ΅ ν‘ν„ν•λ©΄ λ‹¤μκ³Ό κ°™λ‹¤.
t1μ—μ„λ” λ…λ Ήμ–΄ 1κ³Ό 2λ¥Ό λ™μ‹μ— μ²λ¦¬ν•  μ μκ³ , t2μ—μ„λ” λ…λ Ήμ–΄ 1, 2, 3μ„ λ™μ‹μ— μ²λ¦¬ν•  μ μλ‹¤.
μ΄μ²λΌ κ³µμ¥μ μƒμ‚° λΌμΈκ³Ό κ°™μ΄ λ…λ Ήμ–΄λ“¤μ„ **λ…λ Ήμ–΄ νμ΄ν”„λΌμΈ(instruction pipeline)** μ— λ„£κ³  λ™μ‹μ— μ²λ¦¬ν•λ” κΈ°λ²•μ„ **λ…λ Ήμ–΄ νμ΄ν”„λΌμ΄λ‹(instrucctino pipelining)** μ΄λΌκ³  ν•λ‹¤.

<img src="https://github.com/user-attachments/assets/644a228f-0a32-4635-8b4e-2098e17d6205" width="430"/><br/>
<br/>

> #### μνΌμ¤μΉΌλΌ
> μ¤λλ‚  λ€λ¶€λ¶„μ CPUλ” μ—¬λ¬ κ°μ νμ΄ν”„λΌμΈμ„ μ΄μ©ν•λ‹¤. μ΄μ²λΌ **CPU λ‚΄λ¶€μ— μ—¬λ¬ λ…λ Ήμ–΄ νμ΄ν”„λΌμΈμ„ ν¬ν•¨ν•λ” κµ¬μ΅°λ¥Ό μνΌμ¤μΉΌλΌ(superscalar)** λΌκ³  ν•λ‹¤.
> λ…λ Ήμ–΄ νμ΄ν”„λΌμΈμ„ ν•λ‚λ§ λ‘λ” κ²ƒμ΄ λ§μΉ κ³µμ¥μ μƒμ‚° λΌμΈμ„ ν•λ‚λ§ λ‘” κ²ƒκ³Ό κ°™λ‹¤λ©΄, μνΌμ¤μΉΌλΌλ” κ³µμ¥μ μƒμ‚° λΌμΈμ„ μ—¬λ¬ κ° λ‘λ” κ²ƒκ³Ό κ°™λ‹¤.
> μνΌμ¤μΉΌλΌ κµ¬μ΅°λ΅ λ…λ Ήμ–΄ μ²λ¦¬κ°€ κ°€λ¥ν• CPUλ” **μνΌμ¤μΉΌλΌ ν”„λ΅μ„Έμ„**, νΉμ€ **μνΌμ¤μΉΌλΌ CPU**λΌκ³  λ¶€λ¥Έλ‹¤.
>
> <img src="https://github.com/user-attachments/assets/76fab62e-8a3a-4c11-a4c5-cf3839f8adaa" width="420"/><br/>

μ΄λ• CPUκ°€ μ΄ν•΄ν•κ³  μ‹¤ν–‰ν•λ” λ…λ Ήμ–΄ μ§‘ν•© μ¤‘ λ…λ Ήμ–΄ νμ΄ν”„λΌμ΄λ‹μ„ λΉ„λ΅―ν• λ…λ Ήμ–΄ λ³‘λ ¬ μ²λ¦¬μ— μ λ¦¬ν• λ…λ Ήμ–΄ μ§‘ν•©μ΄ μκ³ , λ¶λ¦¬ν• λ…λ Ήμ–΄ μ§‘ν•©μ΄ μλ‹¤λ” μ μ— μ μν•΄μ•Ό ν•λ‹¤.
μ•μ„ λ…λ Ήμ–΄μ μΆ…λ¥μ™€ μƒκΉ€μƒκ°€ CPUλ§λ‹¤ λ‹¤λ¥Ό μ μλ‹¤κ³  κ°•μ΅°ν• λ°” μλ”λ°, νμ΄ν”„λΌμ΄λ‹ μ„±λ¥μ μ°¨μ΄λ¥Ό λ³΄μ΄λ” λ€ν‘μ μΈ λ…λ Ήμ–΄ μ§‘ν•© μ ν•μΌλ΅ CISCμ™€ RISCλ¥Ό κΌ½μ„ μ μλ‹¤.
λ€ν‘μ μΈ CISC κΈ°λ° CPUλ΅λ” μΈν…”μ x86 νΉμ€ x86-64 CPUκ°€ μκ³ , RISC κΈ°λ° CPUλ΅λ” μ• ν”μ M1 CPUκ°€ μλ‹¤. μ–΄μ…λΈ”λ¦¬μ–΄ μμ‹(p63)λ¥Ό ν†µν•΄ CISC λ…λ Ήμ–΄μ™€ RISC λ…λ Ήμ–΄μ μƒκΉ€μƒλ¥Ό μ‚΄ν΄λ³Ό μ μγ„·λ‹¤.

**CISC(Complex Instruction Set Computer)** λ” μ΄λ¦„ κ·Έλ€λ΅ λ‹¤μ±„λ΅μ΄ κΈ°λ¥μ„ μ§€μ›ν•λ” λ³µμ΅ν• λ…λ Ήμ–΄λ“¤λ΅ κµ¬μ„±λ λ…λ Ήμ–΄ μ§‘ν•©μ΄λ‹¤. κ·Έλ ‡κΈ° λ•λ¬Έμ— μ μ€ μμ λ…λ Ήμ–΄λ΅λ„ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•  μ μλ‹¤.
λ°λ€λ΅, **RISC(Reduced Instruction Set Computer)** λ” CISCμ— λΉ„ν•΄ ν™μ© κ°€λ¥ν• λ…λ Ήμ–΄μ μΆ…λ¥κ°€ μ λ‹¤. CISCμ™€λ” λ‹¬λ¦¬ μ§§κ³  κ·κ²©ν™”λ λ…λ Ήμ–΄, λλ„λ΅μ΄λ©΄ 1ν΄λ­ λ‚΄μ™Έλ΅ μ‹¤ν–‰λλ” λ…λ Ήμ–΄λ¥Ό μ§€ν–¥ν•λ‹¤.
κ°™μ€ ν”„λ΅κ·Έλ¨μ΄λΌ ν•λ”λΌλ„ RISCμ—λ” CISCλ³΄λ‹¤ λ§μ€ λ…λ Ήμ–΄κ°€ ν•„μ”ν•λ‹¤.

μ—¬κΈ°κΉμ§€ μ‚΄ν΄λ³΄λ©΄ μ–Έλ» RISCλ³΄λ‹¤ CISCκ°€ λ” μ°μ›”ν• λ…λ Ήμ–΄ μ§‘ν•©μ΄λΌκ³  μƒκ°ν•  μ μμ§€λ§, CISCλ” ν™μ©ν•λ” λ…λ Ήμ–΄κ°€ μ›λ‚™ λ³µμ΅ν•κ³  λ‹¤μ–‘ν• κΈ°λ¥μ„ μ κ³µν•λ” νƒ“μ— λ…λ Ήμ–΄μ ν¬κΈ° λ° μ‹¤ν–‰λκΈ°κΉμ§€μ μ‹κ°„μ΄
μΌμ •ν•μ§€ μ•κ³ , ν•λ‚μ λ…λ Ήμ–΄ μ‹¤ν–‰μ— μ—¬λ¬ ν΄λ­ μ£ΌκΈ°κ°€ ν•„μ”ν•λ‹¤. κ·Έλμ„ CISCλ” RISCμ— λΉ„ν•΄ λ…λ Ήμ–΄μ μν–‰ μ‹κ°„μ΄ κΈΈκ³  λ“¤μ‘¥λ‚ μ‘¥ν•κΈ° λ•λ¬Έμ— νμ΄ν”„λΌμ΄λ‹μ— λΉ„ν¨μ¨μ μΌ μ μλ‹¤.
κ·κ²©ν™”λμ§€ μ•μ€ λ…λ Ήμ–΄κ°€ νμ΄ν”„λΌμ΄λ‹μ„ μ–΄λ µκ² λ§λ“  μ…μ΄λ‹¤. λ°λ©΄, RISCλ” CISCμ— λΉ„ν•΄ ν¬κΈ°κ°€ κ·κ²©ν™”λμ–΄ μκ³ , ν•λ‚μ λ…λ Ήμ–΄κ°€ 1ν΄λ­ λ‚΄μ™Έλ΅ μ‹¤ν–‰λκΈ° λ•λ¬Έμ— νμ΄ν”„λΌμ΄λ‹μ— μµμ ν™”λμ–΄ μλ‹¤.

<img src="https://github.com/user-attachments/assets/f20addd9-3f8e-4856-9a9e-f558bc8e6f58" width="480"/><br/>
<br/>

λ§μ§€λ§‰μΌλ΅ νμ΄ν”„λΌμ΄λ‹μ΄ CPU μ„±λ¥ ν–¥μƒμ— μ‹¤ν¨ν•λ” κ²½μ°λ„ μ•μ•„λ³΄μ.
νμ΄ν”„λΌμ΄λ‹μ΄ μ‹¤ν¨ν•μ—¬ μ„±λ¥ ν–¥μƒμ΄ μ΄λ£¨μ–΄μ§€μ§€ μ•λ” μƒν™©μ€ **νμ΄ν”„λΌμΈ μ„ν—(pipeline hazard)** μ΄λΌκ³  λ¶€λ¥΄λ©°, **λ°μ΄ν„° μ„ν—**κ³Ό **μ μ–΄ μ„ν—, κµ¬μ΅°μ  μ„ν—**μΌλ΅ κµ¬λ¶„ν•  μ μλ‹¤.
**λ°μ΄ν„° μ„ν—(data hazard)** μ€ λ…λ Ήμ–΄ κ°„μ **λ°μ΄ν„° μμ΅΄μ„±**μ— μν•΄ λ°μƒν•λ‹¤. μ–΄λ–¤ λ…λ Ήμ–΄λ“¤μ€ λ™μ‹μ— μ²λ¦¬ν•  μ μ—†κ³ , μ΄μ „ λ…λ Ήμ–΄λ¥Ό λκΉμ§€ μ‹¤ν–‰ν•΄μ•Όλ§ λΉ„λ΅μ† μ‹¤ν–‰ν•  μ μλ‹¤.
μλ¥Ό λ“¤μ–΄ λ‹¤μμ λ‘ λ…λ Ήμ–΄ μ¤‘ λ…λ Ήμ–΄ 2λ” λ…λ Ήμ–΄ 1μ— μμ΅΄μ μ΄λ‹¤. λ…λ Ήμ–΄ 1μ μ €μ¥κΉμ§€ λλ‚Έ λ’¤μ—μ•Ό λΉ„λ΅μ† λ…λ Ήμ–΄ 2λ¥Ό μΈμ¶ν•  μ μκΈ° λ•λ¬Έμ΄λ‹¤.
μ΄λ ‡κ² μμ΅΄μ„±μ΄ μλ” λ‘ λ…λ Ήμ–΄λ¥Ό λ¬΄μ‘μ • κ²Ήμ³μ„ μ‹¤ν–‰ν•λ©΄ νμ΄ν”„λΌμΈμ΄ μ λ€λ΅ μ‘λ™ν•μ§€ μ•μ„ μ μμΌλ©°, μ΄λ¥Ό λ°μ΄ν„° μ„ν—μ΄λΌκ³  ν•λ‹¤.

<img src="https://github.com/user-attachments/assets/f91a5e8e-0d69-4085-9c0c-55b3f1829fbf" width="600"/><br/>
<br/>
> μ΄ν•΄λ¥Ό λ•κΈ° μ„ν•΄ νΈμμƒ λ μ§€μ¤ν„°μ μ΄λ¦„μ„ R1, R2, R3, R4, R5, 'μ™Όμ½ λ μ§€μ¤ν„°μ— μ¤λ¥Έμ½ λ μ§€μ¤ν„° λ‚΄μ©μ„ μ €μ¥ν•λΌ'λ” λ…λ Ήμ„ β† κΈ°νΈλ΅ ν‘κΈ°ν–λ‹¤.

**μ μ–΄ μ„ν—(control hazard)** μ€ **ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°μ κ°‘μ‘μ¤λ¬μ΄ λ³€ν™”**μ— μν•΄ λ°μƒν•λ‹¤. ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°λ” κΈ°λ³Έμ μΌλ΅ 1μ”© μ¦κ°€ν•λ©°, 'ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ λ…λ Ήμ–΄μ λ‹¤μ μ£Όμ†'λ΅ κ°±μ‹ λλ‹¤.
ν•μ§€λ§ JUMP, CONDITIONAL JUMP, μΈν„°λ½νΈ λ“±μΌλ΅ μΈν•΄ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰μ νλ¦„μ΄ λ°”λ€μ–΄ λ…λ Ήμ–΄κ°€ μ‹¤ν–‰λλ©΄μ„ ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„° κ°’μ— κ°‘μ‘μ¤λ¬μ΄ λ³€ν™”κ°€ μƒκΈ°λ©΄ λ―Έλ¦¬ μΈμ¶ν•κ±°λ‚ ν•΄μ„ μ¤‘μΈ λ…λ Ήμ–΄λ“¤μ€
μ•„λ¬΄ μ“Έλ¨κ°€ μ—†μ–΄μ§€κ² λλ‹¤. μ΄λ¥Ό μ μ–΄ μ„ν—μ΄λΌκ³  ν•λ‹¤.

**κµ¬μ΅°μ  μ„ν—(structural hazard)** μ€ λ…λ Ήμ–΄λ“¤μ„ κ²Ήμ³ μ‹¤ν–‰ν•λ” κ³Όμ •μ—μ„ **μ„λ΅ λ‹¤λ¥Έ λ…λ Ήμ–΄κ°€ λ™μ‹μ— ALU, λ μ§€μ¤ν„° λ“± κ°™μ€ CPU λ¶€ν’μ„ μ‚¬μ©**ν•λ ¤κ³  ν•  λ• λ°μƒν•λ‹¤.
κµ¬μ΅°μ  μ„ν—μ€ **μμ› μ„ν—(resource hazard)** μ΄λΌκ³ λ„ λ¶€λ¥Έλ‹¤.